# 并发

##### 进程间通信的几种方式

- [ ] 管道(pipe)
- [ ] 命名管道(FIFO)
- [ ] 消息队列(msg)
- [ ] 信号量(sem)
- [ ] 共享内存(shm)

##### 进程和线程的区别

a）`单位`: 进程是资源分配的最小单位，线程是任务执行的最小单位。

b）`地址空间`: 进程有自己的独立地址空间，每启动一个进程，系统就会为它分配地址空间，建立数据表来维护代码段、堆栈段和数据段，这种操作非常昂贵。而线程是共享进程中的数据的，使用相同的地址空间，因此 CPU 切换一个线程的花费远比进程要小很多，同时创建一个线程的开销也比进程要小很多。

c）`通信`: 线程之间的通信更方便，同一进程下的线程共享全局变量、静态变量等数据，而进程之间的通信需要以通信的方式（IPC)进行。不过如何处理好同步与互斥是编写多线程程序的难点。

d）`健壮`: 但是多进程程序更健壮，多线程程序只要有一个线程死掉，整个进程也死掉了，而一个进程死掉并不会对另外一个进程造成影响，因为进程有自己独立的地址空间。

##### 协程的概念？

`协程是一种用户态的轻量级线程`，协程的调度完全由用户控制。协程拥有自己的寄存器上下文和栈。协程调度切换时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈，直接操作栈则基本没有内核切换的开销，可以不加锁的访问全局变量，所以上下文的切换非常快。

对操作系统而言，线程是最小的执行单元，进程是最小的资源管理单元。无论是进程还是线程，都是由操作系统所管理的。

协程不是被操作系统内核所管理的，而是完全由程序所控制，也就是在用户态执行。这样带来的好处是性能大幅度的提升，因为不会像线程切换那样消耗资源。

协程既不是进程也不是线程，协程仅仅是一个特殊的`函数`，协程它进程和进程不是一个维度的。

`一个进程可以包含多个线程，一个线程可以包含多个协程`。

`一个线程内的多个协程虽然可以切换，但是多个协程是串行执行的`，只能在一个线程内运行，没法利用 CPU 多核能力。

`协程与进程一样，切换是存在上下文切换问题的`。
